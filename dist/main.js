!function(u){var e={};function p(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return u[i].call(r.exports,r,r.exports,p),r.l=!0,r.exports}p.m=u,p.c=e,p.d=function(u,e,i){p.o(u,e)||Object.defineProperty(u,e,{enumerable:!0,get:i})},p.r=function(u){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})},p.t=function(u,e){if(1&e&&(u=p(u)),8&e)return u;if(4&e&&"object"==typeof u&&u&&u.__esModule)return u;var i=Object.create(null);if(p.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:u}),2&e&&"string"!=typeof u)for(var r in u)p.d(i,r,function(e){return u[e]}.bind(null,r));return i},p.n=function(u){var e=u&&u.__esModule?function(){return u.default}:function(){return u};return p.d(e,"a",e),e},p.o=function(u,e){return Object.prototype.hasOwnProperty.call(u,e)},p.p="",p(p.s=0)}([function(u,e,p){"use strict";p.r(e);let i={hadIUseSkills:!1},r={needToRefreshFight:0,exitFightStage:0};function l(u){switch(u.canCreateFight=!1,i.hadIUseSkills=!1,function(u){u.hp=$("span.UserSlotHP")[0].children[0].innerText}(u),function(u){return r.needToRefreshFight>0?"waiting":u.hp<1?"endBattle":"visible"==$(".UserBattleEnd").css("visibility")?"endBattlePopup":"visible"==$(".UserBattleKick").css("visibility")?"waitingForOpponentMove":"hitOpponent"}(u)){case"waiting":r.needToRefreshFight--,console.log("ждем");break;case"endBattle":!function(){switch(r.exitFightStage){case 0:$(".UserBattleKick")[1].click();break;case 1:$(".WindowOk")[0].click();break;case 2:$(".UserBattleKick")[0].click();break;case 3:$(".UserBattleEnd")[0].click()}3===r.exitFightStage?(r.exitFightStage=0,console.log("Вышел из боя")):(r.needToRefreshFight=2,r.exitFightStage++)}();break;case"endBattlePopup":$(".UserBattleEnd")[0].click(),console.log("вышел из боя");break;case"waitingForOpponentMove":$(".UserBattleKick")[0].click(),console.log("обновляем");case"hitOpponent":!function(u){u.hp<200&&t(["spirit_survive"]);t(["preparation","block_path","multi_agressiveshield","hit_shock","block_aftershock","block_activeshield","hp_defence"])}(u),function(){if(i.hadIUseSkills)return;$(".UserBattleCommit")[0].click(),console.log("Ударил")}()}}function t(u){u.forEach(u=>{let e=`http://img.combats.com/i/misc/icons/${u}.gif`,p=$(".UserBattleResources")[1],r=p.children;(r=[...r]).forEach((u,r)=>{let l=p.children[r].children[0];if(l&&l.src==e&&"UserBattleMethod"==l.parentNode.classList.value)return i.hadIUseSkills=!0,void p.children[r].click()})})}let n={stage:0,dungeonName:"gribnicaL2",needToRefresh:0,needToGetItems:!0,needToOpen:!0,needToScan:!0,lastMove:0,needToCheckHash:!1,isFirstMove:!0,brodilkaLoaderOffset:0},o=["Заросший тайник","Спуск в нору","Мастер Фунгус","Спуск в Глубины Грибницы","Заросший проход","Ниша в стене","Мудрый Гусениц","Внимательное око","Яйцеобразные наросты","Симпатичные поганки","Плоский гриб","Ядовитые корни","Светящийся мох","Логово Грибоеда","Скопление непонятных грибных образований","Светящийся мох","Отверстие в потолке","Ядовитые корни","Плоский гриб","Яйцеобразные наросты","Внимательное око"],c=new Set;var a=[];function s(u,e){if(u>e[n.dungeonName].length-1)return void console.log("Пройдено");if(n.needToRefresh>0)return n.needToRefresh--,void console.log("ждем");let p=frames[10].document.getElementById("brodilka").innerHTML.length;if(p===n.lastMove&&n.needToCheckHash)return void console.log("Длина знаков та же");if(n.needToCheckHash=!1,n.lastMove=p,frames[10].document.querySelector("#brodilka .MoveLine").getBoundingClientRect().left<n.brodilkaLoaderOffset)return void console.log("Не прогрузилось...");if(function(){if(!n.needToOpen)return;n.needToScan&&(!function(){for(var u=frames[10].document.getElementById("ObjectsMap").children.length,e=0;e<u;e++)if(""!=frames[10].document.getElementById("ObjectsMap").children[e].href){let u=frames[10].document.getElementById("ObjectsMap").children[e].title;-1===o.indexOf(u)&&(a[a.length]=e)}}(),n.needToScan=!1);0===a.length&&(n.needToOpen=!1,console.log("нет активных предметов"));if(d(),n.needToRefresh>0)return;if(0!==a.length){try{let u=frames[10].document.getElementById("ObjectsMap").children[a[a.length-1]],e=u.title;u.click(),a.pop(),console.log("Нажали на: "+e),c.add(e),d()}catch(u){a.pop()}n.needToRefresh=2}}(),n.needToRefresh>0)return;if(function(){if(!n.needToGetItems)return;n.needToGetItems=!1,frames[10].document.getElementById("items").children.length>0&&(frames[10].document.location.href="javascript:dung_link('getall=1')",console.log("Подбираем вещи"),n.needToRefresh=2)}(),n.needToRefresh>0)return;n.needToCheckHash=!0,n.needToGetItems=!0,n.needToOpen=!0,a=[],n.needToScan=!0;let i=e[n.dungeonName][u];!function(u){"up"===u&&(frames[10].document.location.href="javascript:dung_link('path=m1','m1')");"le"===u&&(frames[10].document.location.href="javascript:dung_link('path=rl')");"ri"===u&&(frames[10].document.location.href="javascript:dung_link('path=rr')")}(i),function(u){if(0!==u.indexOf("TOUCH:"))return;let e=u.substr(7),p=o.indexOf(e);o.splice(p,1),console.log("Теперь можно открыть: "+e),n.needToRefresh=2,n.lastMove=0}(i),function(u){if(0!==u.indexOf("ADD:"))return;let e=u.substr(5);o.push(e),console.log("Больше нельзя открыть: "+e),n.needToRefresh=2,n.lastMove=0}(i),n.needToRefresh=1,n.stage++,console.log(n.stage)}function d(){let u=frames[10].document.getElementById("pmenu");u&&"visible"===u.style.visibility&&(1!==u.getElementsByTagName("a").length?(console.log("Подтверждаем атаку"),u.children[0].children[0].children[0].click(),n.needToRefresh=1):(console.log("Подтверждаем атаку 2 шаг"),u.children[0].click(),n.needToRefresh=2))}function f(u,e){if(e&&(n.needToScan=!0),n.isFirstMove)return n.brodilkaLoaderOffset=frames[10].document.querySelector("#brodilka .MoveLine").getBoundingClientRect().left-1,void(n.isFirstMove=!1);s(n.stage,u)}var h={none:["up"],gribnicaL1:["up","up","le","up","le","up","up","up","le","up","ri","up","up","up","up","up","up","ri","up","up","up","up","ri","up","up","up","up","ri","up","up","up","ri","up","up","up","ri","up","ri","up","ri","up","le","up","up","le","up","up","up","le","up","up","ri","up","le","up","ri","up","up","le","up","ri","up","up","ri","up","up","ri","up","up","le","up","up","le","up","ri","up","le","up","ri","up","ri","up","up","ri","up","le","up","le","up","up","up","ri","up","up","le","up","ri","up","ri","up","up","up","le","up","ri","up","ri","up","up","up","ri","up","ri","up","up","up","le","TOUCH: Ниша в стене","ADD: Ниша в стене","le","up","up","up","ri","up","up","le","up","up","ri","TOUCH: Заросший проход","ADD: Заросший проход","le","up","up","ri","up","ri","ri","up","le","up","up","ri","TOUCH: Заросший проход","ADD: Заросший проход","ri","up","le","up","ri","up","up","up","ri","up","ri","up","le","up","up","le","up"],gribnicaL2:["up","le","up","up","up","up","ri","up","up","ri","up","up","up","up","ri","ri","up","le","up","ri","ri","up","le","up","up","up","ri","up","up","ri","up","up","up","ri","ri","up","le","up","ri","ri","up","le","up","up","ri","up","up","ri","up","up","up","le","up","up","le","up","le","up","ri","up","ri","up","le","le","up","ri","up","TOUCH: Ниша в стене","ADD: Ниша в стене","ri","ri","up","up","le","up","ri","up","ri","up","up","le","up","up","up","ri","up","le","up","up","ri","ri","up","up","le","up","ri","up","up","le","up","le","up","up","up","le","up","ri","up","up","ri","up","up","ri","up","le","up","ri","up","up","up","le","le","up","le","up","ri","ri","up","le","up","up","ri","up","up","ri","up","up","ri","up","le","up","up","up","up","up","up","ri","up","up","up","up","up","up","ri","up","up","up","up","ri","TOUCH: Спуск в нору","ADD: Спуск в нору","up","ri","ri","le","up","ri","up","up","ri","up","up","ri","up","le"],gribnicaL3:["up","up","up","up","up","up","up","le","up","ri","up","up","ri","ri","up","up","le","up","ri","up","up","up","ri","up","up","ri","le","up","up","up","up","ri","up","up","ri","up","up","ri","up","up","ri","ri","up","up","le","up","ri","up","up","le","up","up","up","up","up","up","ri","up","up","le","up","up","le","up","up","ri","up","le","up","up","up","up","ri","ri","up","up","up","le","up","ri","le","up","up","up","le","up","up","le","up","up","le","ri","ri","up","up","up","up","ri","ri","up","up","ri","up","up","ri","up","up","le","le","up","up","up","ri","up","up","ri","le","le","up","up","ri","up","up","up","le","up","ri","ri","up","le","up","up","ri","ri","up","up","le","up","up","ri","up","le","up","up","up","le","up","up","up","up","up","up","up","up","le","up","up","up"],gribnicaL1L2:["up","up","le","up","le","up","up","up","le","up","ri","up","up","up","up","up","up","ri","up","up","up","up","ri","up","up","up","up","ri","up","up","up","ri","up","up","up","ri","up","ri","up","ri","up","le","up","up","le","up","up","up","le","up","up","ri","up","le","up","ri","up","up","le","up","ri","up","up","ri","up","up","ri","up","up","le","up","up","le","up","ri","up","le","up","ri","up","ri","up","up","ri","up","le","up","le","up","up","up","ri","up","up","le","up","ri","up","ri","up","up","up","le","up","ri","up","ri","up","up","up","ri","up","ri","up","up","up","le","TOUCH: Ниша в стене","ADD: Ниша в стене","le","up","up","up","ri","up","up","le","up","up","ri","TOUCH: Заросший проход","ADD: Заросший проход","le","up","up","ri","up","ri","ri","up","le","up","up","ri","TOUCH: Заросший проход","ADD: Заросший проход","ri","up","le","up","ri","up","up","up","ri","up","ri","up","le","up","up","le","up","up","le","up","up","up","up","ri","up","up","ri","up","up","up","up","ri","ri","up","le","up","ri","ri","up","le","up","up","up","ri","up","up","ri","up","up","up","ri","ri","up","le","up","ri","ri","up","le","up","up","ri","up","up","ri","up","up","up","le","up","up","le","up","le","up","ri","up","ri","up","le","le","up","ri","up","TOUCH: Ниша в стене","ADD: Ниша в стене","ri","ri","up","up","le","up","ri","up","ri","up","up","le","up","up","up","ri","up","le","up","up","ri","ri","up","up","le","up","ri","up","up","le","up","le","up","up","up","le","up","ri","up","up","ri","up","up","ri","up","le","up","ri","up","up","up","le","le","up","le","up","ri","ri","up","le","up","up","ri","up","up","ri","up","up","ri","up","le","up","up","up","up","up","up","ri","up","up","up","up","up","up","ri","up","up","up","up","ri","TOUCH: Спуск в нору","ADD: Спуск в нору","up","ri","ri","le","up","ri","up","up","ri","up","up","ri","up","le"]};let g={hp:0,place:"нет",canCreateFight:!1,needToRefresh:0,createByMyself:!1},m=!1,T=!1;setInterval((function(){switch(function(u){if("block"==$(".UserBattleError").parent().parent().parent().parent().parent().css("display"))return void(u.place="в бою");let e=frames[10].document.querySelector("#brodilka");e&&e.getBoundingClientRect()?u.place="в подземелье":u.place="нет"}(g),g.place){case"в бою":l(g),T=!0,m=!0;break;case"в подземелье":f(h,m),m=!1}}),(1e3-(b=500))*Math.random()+b);var b}]);